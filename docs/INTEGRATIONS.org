#+TITLE: Sage Integrations Roadmap
#+AUTHOR: Jason Walsh
#+EMAIL: j@wal.sh
#+OPTIONS: toc:2 num:nil

Potential integrations with popular Emacs packages that would enhance sage's capabilities.

* High Priority

** sage-lsp.el - LSP Mode Integration

#+begin_src elisp
;; Provide LSP diagnostics to sage for context-aware assistance
(defun sage-lsp-get-diagnostics ()
  "Get current buffer's LSP diagnostics for sage context."
  (when (bound-and-true-p lsp-mode)
    (mapcar (lambda (diag)
              `((file . ,(buffer-file-name))
                (line . ,(lsp:diagnostic-range-start-line diag))
                (severity . ,(lsp:diagnostic-severity diag))
                (message . ,(lsp:diagnostic-message diag))))
            (lsp--get-buffer-diagnostics))))

;; Tool: fix_lsp_diagnostic
;; "Fix the LSP diagnostic at point using AI assistance"
#+end_src

*Features:*
- =fix_lsp_error= - AI-assisted error fixing
- =explain_lsp_diagnostic= - Explain what the error means
- =suggest_lsp_actions= - Suggest code actions

** sage-magit.el - Enhanced Git Integration

#+begin_src elisp
;; Tools beyond basic git:
;; - generate_commit_message: AI-generated commit messages from diff
;; - explain_merge_conflict: Explain conflict and suggest resolution
;; - review_staged_changes: Code review before commit
;; - suggest_branch_name: Generate branch name from description
#+end_src

*Features:*
- AI-generated commit messages from staged changes
- Merge conflict explanation and resolution
- Pre-commit code review
- PR description generation

** sage-org.el - Extended Org Mode

#+begin_src elisp
;; Tools for org-mode power users:
;; - summarize_org_file: Generate summary of org document
;; - expand_outline: Flesh out outline into full content
;; - org_to_presentation: Convert org to reveal.js/beamer
;; - schedule_todos: AI-assisted scheduling
#+end_src

*Features:*
- Document summarization
- Outline expansion
- Meeting notes extraction
- TODO prioritization

** sage-flycheck.el - Diagnostics Integration

#+begin_src elisp
;; Integrate with flycheck/flymake for error context
(defun sage-flycheck-errors-at-point ()
  "Get flycheck errors at point for AI context."
  (when (bound-and-true-p flycheck-mode)
    (flycheck-overlay-errors-at (point))))
#+end_src

* Medium Priority

** sage-project.el - Project Management (Existing, Enhance)

#+begin_src elisp
;; Deeper project.el/projectile integration:
;; - project_overview: Generate project documentation
;; - find_related_files: AI-powered related file discovery
;; - refactor_across_project: Multi-file refactoring
#+end_src

** sage-dired.el - File Management

#+begin_src elisp
;; AI-assisted file operations:
;; - rename_files_batch: Smart batch renaming
;; - organize_directory: Suggest file organization
;; - find_duplicates: Find similar/duplicate files
#+end_src

** sage-company.el / sage-corfu.el - Completions

#+begin_src elisp
;; AI-powered completions:
(defun sage-company-backend (command &optional arg &rest ignored)
  "Company backend using sage for completions."
  (interactive (list 'interactive))
  (cl-case command
    (interactive (company-begin-backend 'sage-company-backend))
    (prefix (sage--completion-prefix))
    (candidates (sage--get-completions arg))
    (annotation (sage--completion-annotation arg))))
#+end_src

** sage-treemacs.el - File Tree

#+begin_src elisp
;; AI-enhanced file tree:
;; - Suggest files to open based on current work
;; - Highlight recently AI-modified files
;; - Project structure recommendations
#+end_src

* Lower Priority (Niche)

** sage-latex.el - LaTeX/AUCTeX

#+begin_src elisp
;; LaTeX assistance:
;; - fix_latex_error: Fix compilation errors
;; - suggest_package: Recommend packages for task
;; - explain_latex_macro: Explain what a macro does
#+end_src

** sage-eshell.el - Shell Integration

#+begin_src elisp
;; Shell command assistance:
;; - suggest_command: AI command suggestions
;; - explain_command: Explain what a command does
;; - fix_command_error: Fix shell errors
#+end_src

** sage-eglot.el - Lightweight LSP

#+begin_src elisp
;; Simpler LSP integration for eglot users
;; Similar to sage-lsp but for eglot
#+end_src

** sage-mu4e.el / sage-notmuch.el - Email

#+begin_src elisp
;; Email assistance:
;; - draft_reply: Generate reply draft
;; - summarize_thread: Summarize email thread
;; - extract_action_items: Find TODOs in emails
#+end_src

* Implementation Pattern

All integrations should follow this pattern:

#+begin_src elisp
;;; sage-PACKAGE.el --- Sage integration with PACKAGE -*- lexical-binding: t; -*-

;; Package-Requires: ((emacs "28.1") (sage "0.1") (PACKAGE "X.Y"))

(require 'sage-tools)
(require 'PACKAGE)

;; Check for hard dependency
(unless (featurep 'PACKAGE)
  (error "sage-PACKAGE requires PACKAGE to be installed"))

;; Register tools
(sage-tools--register
 "tool_name"
 "Tool description"
 '((type . "object") ...)
 #'sage-PACKAGE--tool-fn)

(provide 'sage-PACKAGE)
#+end_src

* Priority Matrix

| Integration    | Value  | Effort | Users |
|----------------|--------|--------|-------|
| sage-lsp       | High   | Medium | Many  |
| sage-magit     | High   | Low    | Many  |
| sage-org       | High   | Medium | Many  |
| sage-flycheck  | Medium | Low    | Many  |
| sage-company   | Medium | High   | Many  |
| sage-dired     | Medium | Low    | All   |
| sage-latex     | Low    | Medium | Few   |
| sage-mu4e      | Low    | Medium | Few   |

* Quick Wins (Can implement now)

1. *sage-magit*: AI commit messages from =magit-diff-staged=
2. *sage-org*: Summarize org subtree
3. *sage-flycheck*: Explain error at point
4. *sage-dired*: Batch rename suggestions
